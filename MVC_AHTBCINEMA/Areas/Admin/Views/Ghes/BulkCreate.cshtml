@model AHTBCinema_NHOM4_SD18301.ViewModels.BulkCreateGheViewModel

@{
    ViewData["Title"] = "Tạo mới nhiều ghế";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<h1>Tạo mới nhiều ghế</h1>

<h4>Thông tin Ghế</h4>
<hr />
<form asp-action="BulkCreate">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div class="row justify-content-center">
        <div class="form-group m-2 col-4">
            <label asp-for="SoLuongGhe" class="control-label">Số Lượng Ghế</label>
            <input asp-for="SoLuongGhe" required class="form-control" />
            <span asp-validation-for="SoLuongGhe" class="text-danger"></span>
        </div>
        <div class="form-group m-2 col-4">
            <label asp-for="Phong" class="control-label">Phòng</label>
            <select asp-for="Phong" class="form-control" id="PhongDropdown" asp-items="@(new SelectList(ViewBag.Phongs, "Value", "Text"))"><option value="">-- Chọn Phòng --</option></select>
            <span asp-validation-for="Phong" class="text-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="form-group m-2 col-4">
            <label asp-for="GioChieuId" class="control-label">Giờ Chiếu</label>
            <select asp-for="GioChieuId" class="form-control" id="GioChieuDropdown">
                <option value="">-- Chọn Giờ Chiếu --</option>
            </select>
            <span asp-validation-for="GioChieuId" class="text-danger"></span>
        </div>
        <div class="form-group m-2 col-4">
            <label asp-for="TrangThai" class="control-label">Trạng Thái</label>
            <select asp-for="TrangThai" class="form-control">
                <option value="Đã có">Trống</option>
                <option value="Trống">Đã có</option>
            </select>
            <span asp-validation-for="TrangThai" class="text-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="form-group m-2 col-4">
            <label asp-for="LoaiGhe" class="control-label">Loại Ghế</label>
            <select asp-for="LoaiGhe" class="form-control" asp-items="@(new SelectList(ViewBag.LoaiGhe, "Value", "Text"))"></select>
            <span asp-validation-for="LoaiGhe" class="text-danger"></span>
        </div>
        <div class="form-group m-2 col-4">
            <label asp-for="StartingSeatLetter" class="control-label">Chữ cái ghế</label>
            <input asp-for="StartingSeatLetter" class="form-control" />
            <span asp-validation-for="StartingSeatLetter" class="text-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="form-group m-2 col-4">
            <label asp-for="GiaVe" class="control-label">Giá Vé</label>
            <input asp-for="GiaVe"required type="number" class="form-control" />
            <span asp-validation-for="GiaVe" class="text-danger"></span>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="">
            <a asp-action="Index" class="btn btn-danger m-2 col-7">Quay lại danh sách</a>
        </div>
        <div class="form-group m-2 col-3">
            <input type="submit" value="Tạo mới" class="btn btn-primary" disabled />
        </div>
    </div>
</form>

<script>
    document.getElementById('PhongDropdown').addEventListener('change', function () {
        var phongId = this.value;
        var gioChieuDropdown = document.getElementById('GioChieuDropdown');
        gioChieuDropdown.innerHTML = '<option value="">-- Chọn Giờ Chiếu --</option>';

        if (phongId) {
            fetch('/Admin/Ghes/GetGioChieusByPhong?phongId=' + phongId)
                .then(response => response.json())
                .then(data => {
                    data.forEach(gioChieu => {
                        var option = document.createElement('option');
                        option.value = gioChieu.value;
                        option.text = gioChieu.text;
                        gioChieuDropdown.appendChild(option);
                    });

                    // Enable the submit button once GioChieu is selected
                    document.querySelector('input[type="submit"]').disabled = false;
                });
        } else {
            // Disable the submit button if no Phong is selected
            document.querySelector('input[type="submit"]').disabled = true;
        }
    });
</script>